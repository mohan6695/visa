name = "visa"
compatibility_date = "2024-09-23"
main = "dist/_worker.js"
assets = { directory = "dist", binding = "ASSETS" }
compatibility_flags = ["nodejs_compat"]

# R2 Bucket Bindings
[[r2_buckets]]
binding = "VISA_STORAGE"
bucket_name = "visa-platform-storage"
preview_bucket_name = "visa-platform-storage-preview"

# KV Namespace Bindings (for caching)
[[kv_namespaces]]
binding = "VISA_CACHE"
id = "your-kv-namespace-id"
preview_id = "your-preview-kv-namespace-id"

# Session KV binding (Required by Astro Cloudflare adapter)
[[kv_namespaces]]
binding = "SESSION"
id = "your-session-kv-id"
preview_id = "your-session-kv-preview-id"

# Environment Variables
[vars]
ENVIRONMENT = "production"

# Local development
[dev]
port = 4321
