// Test Supabase connection and list tables
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = 'https://cy_code': upload_response.status_code
                }
        else:
            # Fallback: try direct upload
            direct_response = requests.put(
                upload_url,
                data=file_content,
                headers={
                    'Authorization': f'Bearer {api_key}',
                    'Content-Type': 'application/octet-stream',
                    'x-upsert': 'true',
cnichledvqbxevrwnt.supabase.co'
const supabaseKey = process.env.SUPABASE_ANON_KEY || 'your-anon-key-here'

const sup                    'Content-Length': str(file_size)
                }
            )
            
            if direct_response.status_code in [200, 204]:
                return {
                    'success': True,
                    'message':abase = createClient(supabaseUrl, supabaseKey)

async function testConnection() {
  console.log('Testing Supabase connection...')
  console.log('URL:', supabase f'Successfully uploaded {object_name}',
                    'url': f"{base_endpoint}/storage/v1/object/public/{bucket}/{object_name}",
                    'size': file_size
                }
            else:
Url)
  
  // Test 1: Try to query users table
  const { data: users, error: usersError } = await supabase
    .from('users')
    .select('count')
    .single()
  
  if (usersError) {
    console.log('Users table error:', usersError.message)
                 return {
                    'success': False,
                    'message': f'Failed to upload: {direct_response.text}',
                    'status_code': direct_response.status_code
                }
    
    except Exception as e:
        return {
            'success': False,
            'message': f'Upload error: {str(e)}',
            'error_type': type(e } else {
    console.log('✅ Users table accessible')
  }
  
  // Test 2: Try to query posts table  
  const { data: posts, error).__name__
        }


def main():
    """Main function to upload new_posts.json to Supabase Storage"""
    
    # Configuration from environment
    endpoint = os.environ.get('SUP: postsError } = await supabase
    .from('posts')
    .select('count')
    .single()
    
  if (postsError) {
    console.log('PostsABASE_ENDPOINT', 'https://cycnichledvqbxevrwnt.storage.supabase.co/storage/v1/s3')
    api_key = os.environ.get('SUPABASE_KEY_ID', table error:', postsError.message)
  } else {
    console.log('✅ Posts table accessible')
  }
  
  // Test 3: List all tables using SQL
  const 'visakey:57cdc4296f52ea5078cbfdb138395166')
    bucket = os.environ.get('SUPABASE_BUCKET', 'posts')
    
    # File { data: tables, error: sqlError } = await supabase
    .rpc('exec_sql', { 
      query: "SELECT table_name FROM information_schema.tables WHERE to upload
    file_path = '/Users/mohanakrishnanarsupalli/Downloads/new_posts.json'
    object_name = 'new_posts.json'
    
    print(f"Uploading { table_schema = 'public' ORDER BY table_name" 
    })
    
  if (sqlError) {
    console.log('SQL query error:', sqlError.message)
  } else {
    console.log('✅ Tables:', tables)
  }
}

testConnection()
